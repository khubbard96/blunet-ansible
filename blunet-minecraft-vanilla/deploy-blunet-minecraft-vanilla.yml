---
- name: Deploy blunet-minecraft-vanilla
  hosts: manager
  remote_user: pi

  tasks:
    - name: Deploy blunet-minecraft-vanilla
      community.docker.docker_stack:
        state: present
        name: blunet-minecraft-vanilla
        compose:
          - /opt/blunet-minecraft/blunet-minecraft.docker-compose.yml
    - name: Notify discord of service being up
       uri: 
         url: https://discord.com/api/webhooks/1082575706032185444/PhqrjPKbfK1onY0BNN-z1lLwvZn5pdtN8sY7zyFQS-YkjIx5S8SfsJ8MCNdJ6pwbXZsi
         method: POST
         body: "{\"content\": \"blunet-minecraft-vanilla service is UP.\"}"
         body_format: json
         status_code: [200, 202, 204]
         headers:
           Content-Type: "application/json"
           Accept: "application/json"
